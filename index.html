<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>御嶽山噴火活動に関する情報</title>
<link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.2/leaflet.css"/>
<script src="//cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
<script src="./leaflet-hash.js"></script>
<script src="./TileLayer.GeoJSON.js"></script>
<script src="./h26_0928.js?20140929"></script>
<script src="./h26_0929.js?20140929"></script>
<style>
body {padding: 0; margin: 0}
html, body, #mapdiv {height: 100%; width: 100%;}
.leaflet-container {background: #fff;}
.button {
  border: 2px solid #363ffb; background: #fffece; font-size: 14px;
  width: 90px; height: 40px;
}
</style>
</head>
<body>
<div id="mapdiv">
<script>
var std = L.tileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
    attribution: "地理院タイル（標準地図）", maxZoom: 20, maxNativeZoom: 18, zIndex: 0});
var ontake = L.tileLayer(
  'http://geolib.gsi.go.jp/tiles/thematicmap/VBM/vbm25ontake/{z}/{x}/{x}-{y}-{z}.png', {
    attribution: "火山基本図<a target='_blank' href='http://cyberjapan.jp/legend/l_vbm_ontake.jpg'>凡例</a>",
    minZoom: 17, maxZoom: 20, maxNativeZoom: 17, zIndex: 120});
var ontake_transparent = L.tileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/20140927d_vlcd_t_ontake/{z}/{x}/{y}.png', {
    attribution: "火山基本図（透過）<a target='_blank' href='http://cyberjapan.jp/legend/l_vbm_ontake.jpg'>凡例</a>",
    minZoom: 17, maxZoom: 20, maxNativeZoom: 17, zIndex: 100});
var ontakelc = L.tileLayer(
  'http://geolib.gsi.go.jp/tiles/thematicmap/VLCD/00ontakesan/{z}/{x}/{x}-{y}-{z}.png', {
    attribution: "火山土地条件図（御嶽山）<a target='_blank' href='http://cyberjapan.jp/legend/ontake_legend.jpg'>凡例</a>",
    minZoom: 15, maxZoom: 20, maxNativeZoom: 16, zIndex: 90});
var gazo1 = L.tileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/gazo1/{z}/{x}/{y}.jpg', {
    attribution: "国土画像情報（第一期：1974～1978年撮影）(z=15以上)",
    minZoom: 15, maxZoom: 20, maxNativeZoom: 17, zIndex: 90});
var icons0928 = {
  '#SYMBOL2.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/184.png', iconSize: [20, 20]
  }),
  '#SYMBOL11.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/185.png', iconSize: [20, 20]
  }),
  '#SYMBOL24.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/186.png', iconSize: [20, 20]
  }),
  '#SYMBOL38.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/187.png', iconSize: [20, 20]
  }),
  '#SYMBOL45.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/188.png', iconSize: [20, 20]
  }),
  '#SYMBOL53.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/181.png', iconSize: [20, 20]
  }),
  '#SYMBOL59.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/182.png', iconSize: [20, 20]
  }),
  '#SYMBOL65.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/183.png', iconSize: [20, 20]
  }),
};
var photos0928 = L.geoJson(ontake_geojson0928, {
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng, {icon: icons0928[feature.properties.styleUrl]});
  },
  onEachFeature: function(feature, layer) {
    layer.bindPopup(feature.properties.description, {
      maxWidth: 600
    });
  }
});
var icons0929 = {
  '#SYMBOL2.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/185.png', iconSize: [20, 20]
  }),
  '#SYMBOL6.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/186.png', iconSize: [20, 20]
  }),
  '#SYMBOL11.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/187.png', iconSize: [20, 20]
  }),
  '#SYMBOL15.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/188.png', iconSize: [20, 20]
  }),
  '#SYMBOL19.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/181.png', iconSize: [20, 20]
  }),
  '#SYMBOL22.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/182.png', iconSize: [20, 20]
  }),
  '#SYMBOL26.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/183.png', iconSize: [20, 20]
  }),
  '#SYMBOL30.symbolStyle': L.icon({
    iconUrl: 'http://cyberjapan.jp/symbols/184.png', iconSize: [20, 20]
  })
};
var photos0929 = L.geoJson(ontake_geojson0929, {
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng, {icon: icons0929[feature.properties.styleUrl]});
  },
  onEachFeature: function(feature, layer) {
    layer.bindPopup(feature.properties.description, {
      maxWidth: 600
    });
  }
});
var dol0928 = L.tileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/20140928dol/{z}/{x}/{y}.png', {
    attribution: '正射画像（9/28）', opacity: 1, 
    minZoom: 10, maxZoom: 20, maxNativeZoom: 18, zIndex: 90
  }
);
var dol0929 = L.tileLayer(
  'http://cyberjapandata.gsi.go.jp/xyz/20140929dol/{z}/{x}/{y}.png', {
    attribution: '正射画像（9/29）', opacity: 1, 
    minZoom: 10, maxZoom: 20, maxNativeZoom: 18, zIndex: 91
  }
);

var map = L.map('mapdiv', {
  center: [35.89521, 137.48011], zoom: 17,
  layers: [std, ontake_transparent, photos0928, photos0929, dol0929]});
var hash = L.hash(map);
L.control.layers({}, {
  '斜め写真（9/28）': photos0928,
  '斜め写真（9/29）': photos0929,
  '正射画像（9/28）': dol0928,
  '正射画像（9/29）': dol0929,
  '火山基本図（z=17以上）': ontake,
  '火山基本図（透過）（z=17以上）': ontake_transparent,
  '火山土地条件図（御嶽山）（z=15以上）': ontakelc,
  '過去の正射画像（1974年～1978年撮影）(z=15以上)': gazo1
}, {
  collapsed: true, autoZIndex: false
}).addTo(map);

var jump = L.control({position: 'topright'});
jump.onAdd = function(map) {
  this._div = L.DomUtil.create('div', 'button');
  this.update();
  return this._div;
}
jump.update = function(props) {
  this._div.innerHTML = "<a style='text-decoration: none; color: #363ffb' href='http://portal.cyberjapan.jp/site/mapuse4/index_.html'>通常の<br/>地理院地図へ</a>";
}
jump.addTo(map);

var twitter = L.control({position: 'topright'});
twitter.onAdd = function(map) {
  this._div = L.DomUtil.create('div', 'button');
  this.update();
  return this._div;
}
twitter.update = function(props) {
  this._div.innerHTML = "<a target='_blank' style='text-decoration: none; color: #363ffb' href='https://twitter.com/gsi_cyberjapan'>更新情報<br/>（Twitter）</a>";
}
twitter.addTo(map);

L.control.scale({imperial: false}).addTo(map);
</script>
</body>
</html>
